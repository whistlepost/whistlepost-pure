<th:block data-th-with="action=${resource.adaptTo(@org.whistlepost.model.Action@class)}">
    <form class="pure-form pure-form-aligned" id="edit"
          data-th-method="${action.submit.method}" data-th-enctype="${action.submit.encoding}"
          data-th-target="${action.submit.target}" data-th-action="${action.target.path}">

        <input type="hidden" name=":redirect" data-th-value="|${action.target.path}.html|"/>
        <th:block data-th-each="fieldset : ${action.fieldSets}">
            <fieldset>
                <th:block data-th-if="${fieldset.legend}">
                    <legend data-th-text="${fieldset.legend}">[TITLE]</legend>
                </th:block>
                <th:block data-th-each="field : ${fieldset.fields}">
                    <th:block data-sling-include="${field}" data-sling-replaceSuffix="${action.target.valueMap[field.name]}">
                    </th:block>
                </th:block>
            </fieldset>
        </th:block>
    </form>
<!--    <form id="cancel"-->
<!--          data-th-method="GET"-->
<!--          data-th-target="${action.form.submit.target}" data-th-action="|${action.target.path}.html|"></form>-->
</th:block>
